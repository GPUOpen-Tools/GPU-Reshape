# Build Instructions

Build instructions for Windows. _Linux support pending._

## Supported environments

A minimum version of **CMake 3.17** is required to configure and build the project. Additionally, pulled dependencies expect the following tools to be installed on the system:

- **Python 3.x**

Building experimental UIX requires the following dependencies to be installed on the system:

- **.NET Framework 4.8 (.NET 5.0)**

### Windows

A minimum of **Windows 11 SDK 10.0.22000.0** is required to build the project.

Standard Visual Studio solutions may be generated by invoking the VisualStudio[Version].bat. Alternatively,
the below set-ups are supported:

- Toolchains
    - Visual Studio 2017 / 2019
- Generators
    - Visual Studio
    - Ninja
- Compilers
    - MSVC
    - Clang-cl (11+)

## Configuration options

| Option                | Platform | Default | Description                                                      |
|-----------------------|----------|---------|------------------------------------------------------------------|
| INSTALL_THIRD_PARTY   | All      | `ON`    | Fetch and install third party libraries                          |
| ENABLE_UIX            | All      | `OFF`   | Enables UIX building (Experimental)                              |
| ENABLE_BACKEND_VULKAN | All      | `ON`    | Enables Vulkan support                                           |
| ENABLE_BACKEND_DX12   | All      | `ON`    | Enables DX12 support                                             |
| ENABLE_MIXED_COMPILER | All      | `ON`    | Enables support for multiple compilers, separates built binaries |

Please see *Developmental configuration options* below for additional options.

## Dependencies

- **Detour** </br>
  Instrumentation of API calls (Windows)

- **ArgParse** </br>
  Console argument parser

- **Catch2** </br>
  Testing framework

- **Asio** </br>
  Boost (standalone) networking library

- **Fmt** </br>
  C++ 20 compliant string formatting library

- **SPIRVHeaders** </br>
  SPIRV registry and headers

- **TinyXML2** </br>
  XML parsing and traversal

- **nlohmann/json** </br>
  JSON parsing and traversal

- **VMA** </br>
  Vulkan memory allocator

- **VulkanHeaders** </br>
  Vulkan registry and headers

- **VulkanLoader** </br>
  Vulkan ICD desktop loader

- **libClang** </br>
  Clang compiler C-interface

- **unordered_dense** </br>
  Fast hashmap implementation

- **BTree** </br>
  Fast b'tree implementation

## UIX dependencies

- **Avalonia** </br>
  Write once run everywhere UI framework

#### [NUGET]

- **Avalonia.AvaloniaEdit/0.10.12.2**
- **Avalonia.Controls.TreeDataGrid/0.10.10**
- **Avalonia.Desktop/0.10.14**
- **Avalonia.Diagnostics/0.10.14**
- **Avalonia.ReactiveUI/0.10.14**
- **Avalonia/0.10.14**
- **Dock.Avalonia/0.10.14**
- **Dock.Model.ReactiveUI/0.10.10**
- **MessageBox.Avalonia/1.5.5**
- **Microsoft.CodeAnalysis.Common/3.9.0**
- **Microsoft.CodeAnalysis.Compilers/3.9.0**
- **Microsoft.CodeAnalysis.CSharp.Scripting/3.9.0**
- **Microsoft.CodeAnalysis.CSharp/3.9.0**
- **Microsoft.CodeAnalysis.Scripting.Common/3.9.0**
- **Microsoft.CodeAnalysis/3.9.0**
- **Microsoft.Net.Compilers/3.9.0**
- **Projektanker.Icons.Avalonia.FontAwesome/3.7.0**
- **Projektanker.Icons.Avalonia/3.7.0**
- **XamlNameReferenceGenerator/1.2.1**
- **Avalonia.ReactiveUI.Events/0.10.14**
- **AvaloniaGraphControl/0.10.13**
- **Avalonia.Controls.PanAndZoom/0.14.0**

## Test dependencies

Dependencies only used for testing and development.

- **SPIRVTools** </br>
  SPIRV toolset

- **DirectXShaderCompiler** </br>
  Shader compiler for tests

- **GraphViz** </br>
  DotGraph visualization for dependency debugging

## Developmental configuration options

| Option               | Platform | Default | Description                             |
|----------------------|----------|---------|-----------------------------------------|
| ENABLE_DXIL_DUMP     | All      | `ON`    | Enables dumping of built test DXIL data |
| ENABLE_ASAN          | All      | `OFF`   | Enables clang ASAN                      |
| ENABLE_RELEASE_DEBUG | All      | `ON`    | Enables debug information in release    |
